<!DOCTYPE html>
<html>
<head>
<script src="https://o2bizservices.com/assets/vendor/jquery/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.8/dist/sweetalert2.all.min.js"></script>
<script src="js/location.js" ></script>
	<!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Title Page-->
    <title>Registration Form</title>
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/style.css">
    <script src="assets/js/modernizr-2.6.2.min.js"></script>
	

    <!-- Icons font CSS-->
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    <!-- Vendor CSS-->
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">
    <!-- Main CSS-->
    <link href="css/main.css" rel="stylesheet" media="all">
</head>
<body>
 
<div id="headercontent"></div> 
    <div class="page-wrapper bg-gra-02 p-t-130 p-b-100 font-poppins">
		<div class="wrapper wrapper--w680">
			<div align="center" style="margin-bottom:15px">
				<img src="assets/images/reg-logo.png" />
			</div>
            <div class="card card-4">
                <div class="card-body">
                    <h4 style="margin-left: -31px;">Personal Details</h4>
					<hr style="margin-bottom: 18px;margin-left: -31px;">
                    <form name="myForm">
                        <div class="input-group">
                            <div class="col-12">
                                <div class="input-group">
                                    <label class="label">first name</label>
                                    <input class="input--style-4" type="text" id="first_name" required>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <label class="label">last name</label>
                                    <input class="input--style-4" type="text" id="last_name">
                                </div>
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="col-12">
                                <div class="input-group">
                                    <label class="label">birth date</label>
                                    <div class="input-group-icon">
                                        <input class="input--style-4 js-datepicker" type="text" id="birthdate"
                                        <i class="zmdi zmdi-calendar-note input-icon js-btn-calendar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <label class="label">Gender</label>
                                    <div class="p-t-10">
                                        <label class="radio-container m-r-45">Male
                                            <input type="radio"  name="gender" value="Male">
                                            <span class="checkmark"></span>
                                        </label>
                                        <label class="radio-container">Female
                                            <input type="radio" name="gender" value="Female">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="col-12">
                                <div class="input-group">
                                    <label class="label">Email</label>
                                    <input class="input--style-4" type="email" id="email">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <label class="label">Mobile Number</label>
                                    <input class="input--style-4" type="text" id="mobile">
                                </div>
                            </div>
                        </div>
						<h4 style="margin-left: -31px;">Address Details</h4>
						<hr style="margin-bottom: 18px;margin-left: -31px;">
                        <div class="input-group" style="width: 100%">
                            <label class="label">District</label>
                            <div class="rs-select2 js-select-simple select--search">
                                <select name="district" id="district" onchange="getSelectedDistrictTalukas()">
                                    <option selected="selected" value = "-1">Choose District</option>
                                    <option value ="233">Raigad</option>
                                    <option value="239">Thane</option>
                                </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
						<div class="input-group" style="width: 100%">
                            <label class="label">Taluka</label>
                            <div class="rs-select2 js-select-simple select--search">
                                <select id="talukaId" name="taluka" onchange="getSelectedTalukasVillage()">
                                    <option selected="selected" value = "-1">Choose Taluka</option>
                                </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
						<div class="input-group"style="width: 100%">
                            <label class="label">Postal</label>
                            <div class="rs-select2 js-select-simple select--search">
                                <select id="postId" name="post">
                                    <option selected="selected" value = "-1">Choose Postal</option>
                                </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
						<h4 style="margin-left: -31px;">Education Details</h4>
						<hr style="margin-bottom: 18px;margin-left: -31px;">
						<div class="input-group"style="width: 100%">
                            <label class="label">Education</label>
                            <div class="rs-select2 js-select-simple select--search">
                                <select id="education">
                                    <option selected="selected" value="-1">Choose Education</option>
									<option value="Below 10th">Below 10th</option>
									<option value="10th">10th</option>
									<option value="12th">12th</option>
									<option value="Diploma">Diploma</option>
									<option value="Graduation">Graduation</option>
									<option value="Post-Graduation">Post-Graduation</option>
                                </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
						<div class="input-group"style="width: 100%">
                            <label class="label">Education Stream</label>
                            <div class="rs-select2 js-select-simple select--search">
                                <select id="stream">
                                    <option selected="selected" value="-1">Choose Stream</option>
									<option value="Arts">Arts</option>
									<option value="Commerce">Commerce</option>
									<option value="Science">Science</option>
									<option value="Other">Other</option>
                                </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
						<div class="input-group"style="width: 100%">
                            <label class="label">Year of Passing</label>
                            <div class="rs-select2 js-select-simple select--search">
                                <select id="yearofpass">
                                    <option selected="selected" value="-1">Choose Year</option>
							    </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
						<div class="input-group"style="width: 100%">
                            <label class="label">Percentage/CGPA</label>
                            <div class="rs-select2 js-select-simple select--search">
                                <input class="input--style-4" type="text" id="percentage">
                            </div>
                        </div>
						<div class="input-group">
                            <div class="col-12">
                                <div class="input-group">
                                    <label class="label">Other Details (if any)</label>
                                    <textarea id="otherdetails" class="input--style-4" style="width:100%"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="input-group"style="width: 100%">
						 <label class="label">Upload Resume</label>
						<input type="file" name="fileToUpload" onchange="encodeImgtoBase64(this)" id="fileToUpload" style="padding-bottom: 20px;padding-top: 20px;">
						</div>
                        <div class="p-t-15">
                           <input type="button" onClick="return submitData(this)" class="btn btn--radius-2 btn--blue" value="Submit Registration" />
                        </div>						 
                    </form>
                </div>
            </div>
        </div>
    </div>
	<div id="footercontent"></div>
	<script src="js/htmlcontent.js"></script>
    <!-- Jquery JS-->
   <script src="assets/js/bootstrap.min.js"></script>

  <!-- owl carouseljavascript file -->
  <script src="assets/js/owl.carousel.min.js"></script>

  <!-- Template main javascript -->
  <script src="assets/js/main.js"></script>
    <!-- Vendor JS-->
    <script src="vendor/select2/select2.min.js"></script>
    <script src="vendor/datepicker/moment.min.js"></script>
    <script src="vendor/datepicker/daterangepicker.js"></script>
    <!-- Main JS-->
    <script src="js/global.js"></script>
	<script>
	for(i=2000;i<=2023;i++){
		$('#yearofpass').append($("<option></option>").attr("value", i).text(i)); 
	}
	var filename="",filecontent="";
	var contextPath="https://36n00y4czc.execute-api.ap-northeast-1.amazonaws.com/dev/api/v1/";
	function encodeImgtoBase64(element) {
      var file = element.files[0];
	  var reader = new FileReader();
	  filename = file.name;
      reader.onload = function(readerEvt) {
            var binaryString = readerEvt.target.result;
			filecontent=btoa(binaryString);
        };
        reader.readAsBinaryString(file);     
    }
	function submitData(obj) {
	  let first_name = document.forms["myForm"]["first_name"].value;
	  let birth_date = document.forms["myForm"]["birthdate"].value;
	  let email = document.forms["myForm"]["email"].value;
	  let phone = document.forms["myForm"]["mobile"].value;
	  let district = document.forms["myForm"]["district"].value;
	  let taluka = document.forms["myForm"]["taluka"].value;
	  let post = document.forms["myForm"]["post"].value;
	  var phoneNumberRegEx = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
	  var gmailRegEx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
	  if (first_name == "") {
		showAlert("Enter your first name ⚠️");
		return false;
	  }
	   if (birth_date == "") {
		showAlert("Select date of birth ⚠️");
		return false;
	  }
	   
	  if (phone == "") {
		showAlert("Enter your phone number ⚠️");
		return false;
	  } else if (!phone.match(phoneNumberRegEx)) {
		showAlert("Enter valid phone number ⚠️");
		return false;
	  }
	  if(district =="-1"){
		showAlert("Select district ⚠️");
		return false;
	  }
	  if(taluka =="-1"){
		showAlert("Select taluka ⚠️");
		return false;
	  }
	   if(post =="-1"){
		showAlert("Select post ⚠️");
		return false;
	  }
	  if(filename == ""){
		showAlert("Please Upload Document");
		return false;
	  }
	  if($("input[name='gender']:checked").val() == undefined){
		showAlert("Please Select Gender");
		return false;
	  }
	  if($("#education").val() == "-1"){
		showAlert("Please Select Education");
		return false;
	  }
	   if($("#education").val() == "-1"){
		showAlert("Please Select Education");
		return false;
	  }
	  if($("#percentage").val() == "") {
		showAlert("Enter your CGPA/Percentage");
		return false;
	  }
	  $(obj).attr('value','Please wait...').prop('disabled',true);	  
	  var map={};
	  map["firstname"]=$("#first_name").val();
	  map["lastname"]=$("#last_name").val();
	  map["dob"]=$("#birthdate").val();
	  map["email"]=$("#email").val();
	  map["mobile"]=$("#mobile").val();
	  map["district"]=$("#district :selected").html();
	  map["taluka"]=$("#talukaId :selected").html();
	  map["post"]=$("#postId :selected").html();
	  map["gender"]=$("input[name='gender']:checked").val();
	  map["docname"]=filename;
	  map["filecontent"]=filecontent;
	  map["education"]=$("#education :selected").html();
	  map["stream"]=$("#stream :selected").html();
	  map["otherdetails"]=$("#otherdetails").val();
	  map["yearOfPass"]=$("#yearofpass :selected").html();
	  map["percentage"]=$("#percentage").val();
	  $.ajax({
		  type: 'POST',
		  data:JSON.stringify(map),	
		  url: contextPath +"saveRegistration",
		  complete: function (response1) {
					$(obj).attr('value','Submit Registration').prop('disabled',false);
					showAlert(response1.responseJSON);
					if(response1.status == 200){						
						clearForm();
					}					
				},		  		
			});	  
	}
	
	function clearForm(){
		 $("#first_name").val("");
		 $("#last_name").val("");
		 $("#birthdate").val("");
		 $("#email").val("");
		 $("#mobile").val("");
		 $("#district").val("-1").change();
		 $("#talukaId").val("-1").change();
		 $("#postId").val("-1").change();
		 $("#fileToUpload").val("");
		 filename="";
		 filecontent="";
		 $("#education").val("-1").change();
		 $("#stream").val("-1").change();
	     $("#otherdetails").val("");
	     $("#yearofpass").val("-1").change();
	     $("#percentage").val("");
	}
	
	function getSelectedDistrictTalukas() {
		$('#talukaId').empty();
		$('#talukaId').append($("<option></option>").attr("value", "-1").text("Choose Taluka")); 
		var data = talukaMap[$("#district").val()];
		$.each(data, function(key, value) {   
			$('#talukaId').append($("<option></option>").attr("value", key).text(value)); 
		});		
    }
	
	function getSelectedTalukasVillage() {
        $('#postId').empty();
	    $(postId).append($("<option></option>").attr("value", "-1").text("Choose Postal")); 
        var data = postMap[$("#talukaId").val()];
		$.each(data, function(key, value) {   
			$('#postId').append($("<option></option>").attr("value", key).text(value)); 
		});		
    }
	function showAlert(msg){
        Swal.fire({
		  text: msg,
		  type: 'warning',
		  showCancelButton: false,
		  // Background color of the "Confirm"-button. The default color is #3085d6
		  confirmButtonColor: 'LightSeaGreen',
		  // Background color of the "Cancel"-button. The default color is #aaa
		  cancelButtonColor: 'Crimson',
		  confirmButtonText: 'OK'
		})
	}
	</script>
</body>
</html>